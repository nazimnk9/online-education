(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{98165:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});var r=t(1413),n=t(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},o=t(42135),l=function(e,a){return n.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:a,icon:i}))};l.displayName="SyncOutlined";var s=n.forwardRef(l)},8576:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/instructor/course/create",function(){return t(42673)}])},99709:function(e,a,t){"use strict";var r=t(85893),n=t(44466),i=t(53575),o=t(37911),l=t(71577);let{Option:s}=n.Z,c=e=>{let{handleSubmit:a,handleImage:t,handleChange:c,values:d,setValues:u,preview:h,uploadButtonText:g,handleImageRemove:m=e=>e,editPage:p=!1}=e,v=[];for(let e=9.99;e<=100.99;e++)v.push((0,r.jsxs)(s,{children:["$",e.toFixed(2)]},e.toFixed(2)));return(0,r.jsx)(r.Fragment,{children:d&&(0,r.jsxs)("form",{onSubmit:a,children:[(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("input",{type:"text",name:"name",className:"form-control",placeholder:"Name",value:d.name,onChange:c})}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("textarea",{name:"description",cols:"7",rows:"7",value:d.description,className:"form-control",onChange:c})}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"form-group",children:(0,r.jsxs)(n.Z,{style:{width:"100%"},size:"large",value:d.paid,onChange:e=>u({...d,paid:e,price:0}),children:[(0,r.jsx)(s,{value:!0,children:"Paid"}),(0,r.jsx)(s,{value:!1,children:"Free"})]})})}),d.paid&&(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)(n.Z,{defaultValue:"$9.99",style:{width:"100%"},onChange:e=>u({...d,price:e}),tokenSeparators:[,],size:"large",children:v})})]}),(0,r.jsx)("div",{className:"form-group",children:(0,r.jsx)("input",{type:"text",name:"category",className:"form-control",placeholder:"Category",value:d.category,onChange:c})}),(0,r.jsxs)("div",{className:"form-row",children:[(0,r.jsx)("div",{className:"col",children:(0,r.jsx)("div",{className:"form-group",children:(0,r.jsxs)("label",{className:"btn btn-outline-secondary btn-block text-left",children:[g,(0,r.jsx)("input",{type:"file",name:"image",onChange:t,accept:"image/*",hidden:!0})]})})}),h&&(0,r.jsx)(i.Z,{count:"X",onClick:m,className:"pointer",children:(0,r.jsx)(o.C,{width:200,src:h})}),p&&d.image&&(0,r.jsx)(o.C,{width:200,src:d.image.location})]}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col",children:(0,r.jsx)(l.ZP,{onClick:a,disabled:d.loading||d.uploading,className:"btn btn-primary",loading:d.loading,type:"primary",size:"large",shape:"round",children:d.loading?"Saving...":"Save & Continue"})})})]})})};a.Z=c},68252:function(e,a,t){"use strict";t.d(a,{Z:function(){return h}});var r=t(85893),n=t(67294),i=t(8433),o=t(11163),l=t(98165),s=t(41664),c=t.n(s);let d=()=>{let[e,a]=(0,n.useState)("");return(0,n.useEffect)(()=>{a(window.location.pathname)},[window.location.pathname]),(0,r.jsxs)("div",{className:"nav flex-column nav-pills",children:[(0,r.jsx)(c(),{legacyBehavior:!0,href:"/instructor",children:(0,r.jsx)("a",{className:"nav-link ".concat("/instructor"===e&&"active"),children:"Dashboard"})}),(0,r.jsx)(c(),{legacyBehavior:!0,href:"/instructor/course/create",children:(0,r.jsx)("a",{className:"nav-link ".concat("/instructor/course/create"===e&&"active"),children:"Course Create"})}),(0,r.jsx)(c(),{legacyBehavior:!0,href:"/instructor/revenue",children:(0,r.jsx)("a",{className:"nav-link ".concat("/instructor/revenue"===e&&"active"),children:"Revenue"})})]})},u=e=>{let{children:a}=e,[t,s]=(0,n.useState)(!1),c=(0,o.useRouter)();(0,n.useEffect)(()=>{u()},[]);let u=async()=>{try{let{data:e}=await i.Z.get("/api/current-instructor");e.ok&&s(!0)}catch(e){console.log(e),s(!1),c.push("/")}};return(0,r.jsx)(r.Fragment,{children:t?(0,r.jsx)("div",{className:"container-fluid",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-2",children:(0,r.jsx)(d,{})}),(0,r.jsx)("div",{className:"col-md-10",children:a})]})}):(0,r.jsx)(l.Z,{spin:!0,className:"d-flex justify-content-center display-1 text-primary p-5"})})};var h=u},42673:function(e,a,t){"use strict";t.r(a);var r=t(85893),n=t(8433),i=t(68252),o=t(67294),l=t(99709),s=t(76770),c=t.n(s),d=t(22920),u=t(11163);let h=()=>{let[e,a]=(0,o.useState)({name:"",description:"",price:"9.99",uploading:!1,paid:!0,category:"",loading:!1}),[t,s]=(0,o.useState)({}),[h,g]=(0,o.useState)(""),[m,p]=(0,o.useState)("Upload Image"),v=(0,u.useRouter)(),f=t=>{a({...e,[t.target.name]:t.target.value})},x=t=>{let r=t.target.files[0];g(window.URL.createObjectURL(r)),p(r.name),a({...e,loading:!0}),c().imageFileResizer(r,720,500,"JPEG",100,0,async t=>{try{let{data:r}=await n.Z.post("/api/course/upload-image",{image:t});console.log("IMAGE UPLOADED",r),s(r),a({...e,loading:!1})}catch(t){console.log(t),a({...e,loading:!1}),(0,d.Am)("Image upload failed. Try again later.")}})},y=async()=>{try{a({...e,loading:!0}),await n.Z.post("/api/course/remove-image",{image:t}),s({}),g(""),p("Upload Image"),a({...e,loading:!1})}catch(t){console.log(t),a({...e,loading:!1}),(0,d.Am)("Failed. Try again later.")}},j=async a=>{a.preventDefault();try{let{data:a}=await n.Z.post("/api/course",{...e,image:t});(0,d.Am)("Successfully created! Now you can start adding lessons"),v.push("/instructor")}catch(e){(0,d.Am)(e.response.data)}};return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)("h1",{className:"jumbotron text-center square",children:"Create Course"}),(0,r.jsx)("div",{className:"pt-3 pb-3",children:(0,r.jsx)(l.Z,{handleSubmit:j,handleImage:x,handleChange:f,values:e,setValues:a,preview:h,uploadButtonText:m,handleImageRemove:y})}),(0,r.jsx)("hr",{})]})};a.default=h},76770:function(e){e.exports=(()=>{"use strict";var e={352:(e,a,t)=>{t.r(a),t.d(a,{default:()=>n});var r=function(){var e;function a(){!function(e,a){if(!(e instanceof a))throw TypeError("Cannot call a class as a function")}(this,a)}return e=[{key:"changeHeightWidth",value:function(e,a,t,r,n,i){return t>r&&(e=Math.round(e*r/t),t=r),e>a&&(t=Math.round(t*a/e),e=a),n&&t<n&&(e=Math.round(e*n/t),t=n),i&&e<i&&(t=Math.round(t*i/e),e=i),{height:e,width:t}}},{key:"resizeAndRotateImage",value:function(e,a,t,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=document.createElement("canvas"),c=e.width,d=e.height,u=this.changeHeightWidth(d,t,c,a,r,n);l&&(90===l||270===l)?(s.width=u.height,s.height=u.width):(s.width=u.width,s.height=u.height),c=u.width,d=u.height;var h=s.getContext("2d");return l&&(h.rotate(l*Math.PI/180),90===l?h.translate(0,-s.width):180===l?h.translate(-s.width,-s.height):270===l?h.translate(-s.height,0):0!==l&&360!==l||h.translate(0,0)),h.drawImage(e,0,0,c,d),s.toDataURL("image/".concat(i),o/100)}},{key:"b64toByteArrays",value:function(e,a){a=a||"image/jpeg";for(var t=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg|webp);base64,/,"")),r=[],n=0;n<t.length;n+=512){for(var i=t.slice(n,n+512),o=Array(i.length),l=0;l<i.length;l++)o[l]=i.charCodeAt(l);var s=new Uint8Array(o);r.push(s)}return r}},{key:"b64toBlob",value:function(e,a){var t=this.b64toByteArrays(e,a);return new Blob(t,{type:a})}},{key:"b64toFile",value:function(e,a,t){var r=this.b64toByteArrays(e,t);return new File(r,a,{type:t})}},{key:"createResizedImage",value:function(e,t,r,n,i,o,l){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,u=new FileReader;if(!e)throw Error("File Not Found!");if(e.type&&!e.type.includes("image"))throw Error("File Is NOT Image!");u.readAsDataURL(e),u.onload=function(){var h=new Image;h.src=u.result,h.onload=function(){var u=a.resizeAndRotateImage(h,t,r,c,d,n,i,o),g="image/".concat(n);switch(s){case"blob":l(a.b64toBlob(u,g));break;case"base64":default:l(u);break;case"file":l(a.b64toFile(u,e.name,g))}}},u.onerror=function(e){throw Error(e)}}}],function(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(a,e),a}();let n={imageFileResizer:function(e,a,t,n,i,o,l,s,c,d){return r.createResizedImage(e,a,t,n,i,o,l,s,c,d)}}}},a={};function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{}};return e[r](n,n.exports,t),n.exports}return t.d=(e,a)=>{for(var r in a)t.o(a,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:a[r]})},t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t(352)})()}},function(e){e.O(0,[911,577,466,575,774,888,179],function(){return e(e.s=8576)}),_N_E=e.O()}]);