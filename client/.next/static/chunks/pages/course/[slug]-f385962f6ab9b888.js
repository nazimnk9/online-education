(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[982],{80653:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/[slug]",function(){return r(81446)}])},81446:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return O},default:function(){return T}});var n=r(85893),s=r(67294),o=r(8433),a=r(11163),l=r(77278),i=r(53575),c=r(71577),u=r(22004),d=r(50888),h=r(1413),m={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64L128 192v384c0 212.1 171.9 384 384 384s384-171.9 384-384V192L512 64zm312 512c0 172.3-139.7 312-312 312S200 748.3 200 576V246l312-110 312 110v330z"}},{tag:"path",attrs:{d:"M378.4 475.1a35.91 35.91 0 00-50.9 0 35.91 35.91 0 000 50.9l129.4 129.4 2.1 2.1a33.98 33.98 0 0048.1 0L730.6 434a33.98 33.98 0 000-48.1l-2.8-2.8a33.98 33.98 0 00-48.1 0L483 579.7 378.4 475.1z"}}]},name:"safety",theme:"outlined"},f=r(42135),p=function(e,t){return s.createElement(f.Z,(0,h.Z)((0,h.Z)({},e),{},{ref:t,icon:m}))};p.displayName="SafetyOutlined";var v=s.forwardRef(p);let g=e=>{let{course:t,showModal:r,setShowModal:o,preview:a,setPreview:h,loading:m,user:f,handlePaidEnrollment:p,handleFreeEnrollment:g,enrolled:w,setEnrolled:j}=e,{name:x,description:y,instructor:S,updatedAt:N,lessons:_,image:E,price:b,paid:Z,category:k}=t,[C,L]=(0,s.useState)([]);return(0,s.useEffect)(()=>{let e=_[0];L(e)},[]),(0,n.jsx)("div",{className:"jumbotron bg-primary square",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-md-8",children:[(0,n.jsx)("h1",{className:"text-light font-weight-bold",children:x}),(0,n.jsxs)("p",{className:"lead",children:[y&&y.substring(0,300),"..."]}),(0,n.jsx)(i.Z,{count:k,style:{backgroundColor:"#006400"},className:"pb-4 mr-2"}),(0,n.jsxs)("p",{children:["Created by ",S.name]}),(0,n.jsxs)("p",{children:["Last updated ",new Date(N).toLocaleDateString()]}),(0,n.jsx)("h4",{className:"text-light",children:Z?(0,l.o)({amount:b,currency:"usd"}):"Free"})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[C.free_preview&&C.video&&C.video.location?(0,n.jsx)("div",{onClick:()=>{h(C.video.location),o(!r)},children:(0,n.jsx)(u.Z,{className:"react-player-div",url:C.video.location,light:E.location,width:"100%",height:"225px"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("img",{src:E.location,alt:x,className:"img img-fluid"})}),m?(0,n.jsx)("div",{className:"d-flex justify-content-center",children:(0,n.jsx)(d.Z,{className:"h1 text-danger"})}):(0,n.jsx)(c.ZP,{className:"mb-3 mt-3",type:"danger",block:!0,shape:"round",style:{backgroundColor:"#00BFFF",color:"#E0FFFF"},icon:(0,n.jsx)(v,{}),size:"large",disabled:m,onClick:Z?p:g,children:f?w.status?"Go to course":"Enroll":"Login to enroll"})]})]})})};var w=r(30143);let j=e=>{let{showModal:t,setShowModal:r,preview:s}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(w.Z,{title:"Course Preview",visible:t,onCancel:()=>r(!t),width:720,footer:null,children:(0,n.jsx)("div",{className:"wrapper",children:(0,n.jsx)(u.Z,{url:s,playing:t,controls:!0,width:"100%",height:"100%"})})})})};var x=r(92874),y=r(37911);let{Item:S}=x.ZP,N=e=>{let{lessons:t,setPreview:r,showModal:s,setShowModal:o}=e;return(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col lesson-list",children:[t&&(0,n.jsxs)("h4",{children:[t.length," Lessons"]}),(0,n.jsx)("hr",{}),(0,n.jsx)(x.ZP,{itemLayout:"horizontal",dataSource:t,renderItem:(e,t)=>(0,n.jsxs)(S,{children:[(0,n.jsx)(S.Meta,{avatar:(0,n.jsx)(y.C,{children:t+1}),title:e.title}),e.video&&null!==e.video&&e.free_preview&&(0,n.jsx)("span",{className:"text-primary pointer",onClick:()=>{r(e.video.location),o(!s)},children:"Preview"})]})})]})})})};var _=r(63799),E=r(22920),b="https://js.stripe.com/v3",Z=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,k=function(){for(var e=document.querySelectorAll('script[src^="'.concat(b,'"]')),t=0;t<e.length;t++){var r=e[t];if(Z.test(r.src))return r}return null},C=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(b).concat(t);var n=document.head||document.body;if(!n)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},L=function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"1.54.0",startTime:t})},P=null,F=function(e,t,r){if(null===e)return null;var n=e.apply(void 0,t);return L(n,r),n},M=Promise.resolve().then(function(){return null!==P?P:P=new Promise(function(e,t){if("undefined"==typeof window||"undefined"==typeof document){e(null);return}if(window.Stripe,window.Stripe){e(window.Stripe);return}try{var r=k();r||(r=C(null)),r.addEventListener("load",function(){window.Stripe?e(window.Stripe):t(Error("Stripe.js not available"))}),r.addEventListener("error",function(){t(Error("Failed to load Stripe.js"))})}catch(e){t(e);return}})}),A=!1;M.catch(function(e){A||console.warn(e)});var q=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];A=!0;var n=Date.now();return M.then(function(e){return F(e,t,n)})};let z=e=>{let{course:t}=e,[r,l]=(0,s.useState)(!1),[i,c]=(0,s.useState)(""),[u,d]=(0,s.useState)(!1),[h,m]=(0,s.useState)({}),{state:{user:f}}=(0,s.useContext)(_._);(0,s.useEffect)(()=>{f&&t&&p()},[f,t]);let p=async()=>{let{data:e}=await o.Z.get("/api/check-enrollment/".concat(t._id));m(e),console.log("check enrollment",e)},v=(0,a.useRouter)(),{slug:w}=v.query,x=async()=>{try{if(d(!0),!f)return(0,E.Am)("Please Login Or Registration first"),v.push("/login");if(h.status)return v.push("/user/course/".concat(h.course.slug));let{data:e}=await o.Z.post("/api/paid-enrollment/".concat(t._id)),r=await q("pk_test_51HZoxgBsTsYCoHZSqYQid5460oQ950uo4oQjucMQMRCJfZqkLzNP6okotutKUOV2EJtY20MtYItVZk60G775LyWQ00Pu3BjXCs");r.redirectToCheckout({sessionId:e})}catch(e){(0,E.Am)("Enrollment failed try again."),console.log(e),d(!1)}},y=async e=>{e.preventDefault();try{if(!f)return(0,E.Am)("Please Login Or Registration first"),v.push("/login");if(h.status)return v.push("/user/course/".concat(h.course.slug));d(!0);let{data:e}=await o.Z.post("/api/free-enrollment/".concat(t._id));(0,E.Am)(e.message),d(!1),v.push("/user/course/".concat(e.course.slug))}catch(e){(0,E.Am)("Enrollment failed. Try Again."),console.log(e),d(!1)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(g,{course:t,showModal:r,setShowModal:l,preview:i,setPreview:c,user:f,loading:u,handlePaidEnrollment:x,handleFreeEnrollment:y,enrolled:h,setEnrolled:m}),(0,n.jsx)(j,{showModal:r,setShowModal:l,preview:i}),t.lessons&&(0,n.jsx)(N,{lessons:t.lessons,setPreview:c,showModal:r,setShowModal:l})]})};var O=!0,T=z},77278:function(e,t,r){"use strict";r.d(t,{Y:function(){return s},o:function(){return n}});let n=e=>(100*e.amount/100).toLocaleString(e.currency,{style:"currency",currency:e.currency}),s=e=>(e.amount/100).toLocaleString(e.currency,{style:"currency",currency:e.currency})}},function(e){e.O(0,[911,577,466,575,452,317,774,888,179],function(){return e(e.s=80653)}),_N_E=e.O()}]);