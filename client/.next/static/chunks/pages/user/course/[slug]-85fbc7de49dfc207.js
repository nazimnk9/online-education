(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{74842:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var l=t(1413),a=t(67294),c={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},n=t(42135),i=function(e,s){return a.createElement(n.Z,(0,l.Z)((0,l.Z)({},e),{},{ref:s,icon:c}))};i.displayName="PlayCircleOutlined";var r=a.forwardRef(i)},61302:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/course/[slug]",function(){return t(68535)}])},64806:function(e,s,t){"use strict";var l=t(85893),a=t(41664),c=t.n(a),n=t(67294);let i=()=>{let[e,s]=(0,n.useState)("");return(0,n.useEffect)(()=>{s(window.location.pathname)},[window.location.pathname]),(0,l.jsx)("div",{className:"nav flex-column nav-pills",children:(0,l.jsx)(c(),{legacyBehavior:!0,href:"/user",children:(0,l.jsx)("a",{className:"nav-link ".concat("/user"===e&&"active"),children:"Dashboard"})})})};s.Z=i},68535:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var l=t(85893),a=t(11163),c=t(67294),n=t(8433),i=t(98165);t(64806);let r=e=>{let{children:s,showNav:t=!0}=e,[r,o]=(0,c.useState)(!1),d=(0,a.useRouter)();(0,c.useEffect)(()=>{u()},[]);let u=async()=>{try{let{data:e}=await n.Z.get("/api/current-user");e.ok&&o(!0)}catch(e){console.log(e),o(!1),d.push("/login")}};return(0,l.jsx)(l.Fragment,{children:r?(0,l.jsx)("div",{className:"container-fluid",children:s}):(0,l.jsx)(i.Z,{spin:!0,className:"d-flex justify-content-center display-1 text-primary p-5"})})};var o=t(47265),d=t(71577),u=t(37911),m=t(22004),h=t(30724),f=t.n(h),p=t(1413),v={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},x=t(42135),g=function(e,s){return c.createElement(x.Z,(0,p.Z)((0,p.Z)({},e),{},{ref:s,icon:v}))};g.displayName="MenuUnfoldOutlined";var y=c.forwardRef(g),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},w=function(e,s){return c.createElement(x.Z,(0,p.Z)((0,p.Z)({},e),{},{ref:s,icon:j}))};w.displayName="MenuFoldOutlined";var N=c.forwardRef(w),Z=t(89739),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm192 472c0 4.4-3.6 8-8 8H328c-4.4 0-8-3.6-8-8v-48c0-4.4 3.6-8 8-8h368c4.4 0 8 3.6 8 8v48z"}}]},name:"minus-circle",theme:"filled"},k=function(e,s){return c.createElement(x.Z,(0,p.Z)((0,p.Z)({},e),{},{ref:s,icon:_}))};k.displayName="MinusCircleFilled";var z=c.forwardRef(k),E=t(74842);let{Item:b}=o.Z,C=()=>{let[e,s]=(0,c.useState)(-1),[t,i]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1),[v,x]=(0,c.useState)({lessons:[]}),[g,j]=(0,c.useState)([]),[w,_]=(0,c.useState)(!1),k=(0,a.useRouter)(),{slug:C}=k.query;(0,c.useEffect)(()=>{C&&M()},[C]),(0,c.useEffect)(()=>{v&&S()},[v]);let M=async()=>{let{data:e}=await n.Z.get("/api/user/course/".concat(C));x(e)},S=async()=>{let{data:e}=await n.Z.post("/api/list-completed",{courseId:v._id});console.log("completed lessons => ",e),j(e)},H=async()=>{let{data:s}=await n.Z.post("/api/mark-completed",{courseId:v._id,lessonId:v.lessons[e]._id});console.log(s),j([...g,v.lessons[e]._id])},I=async()=>{try{let{data:s}=await n.Z.post("/api/mark-incomplete",{courseId:v._id,lessonId:v.lessons[e]._id});console.log(s),console.log("All =>",g);let t=g.indexOf(v.lessons[e]._id);t>-1&&(g.splice(t,1),console.log("All without removed =>",g),j(g),_(!w))}catch(e){console.log(e)}};return(0,l.jsx)(r,{children:(0,l.jsxs)("div",{className:"row",children:[(0,l.jsxs)("div",{style:{maxWidth:"320"},children:[(0,l.jsxs)(d.ZP,{onClick:()=>i(!t),className:"text-primary mt-1 btn-block mb-2",children:[(0,c.createElement)(t?y:N)," ",!t&&"Lessons"]}),(0,l.jsx)(o.Z,{defaultSelectedKeys:[e],inlineCollapsed:t,style:{height:"100vh",overflow:"scroll"},children:v.lessons.map((e,t)=>(0,l.jsxs)(b,{onClick:()=>s(t),icon:(0,l.jsx)(u.C,{children:t+1}),style:{display:"flex",alignItems:"center"},children:[e.title.substring(0,30)," ",g.includes(e._id)?(0,l.jsx)(Z.Z,{className:"float-right text-primary ml-2",style:{marginTop:"13px"}}):(0,l.jsx)(z,{className:"float-right text-danger ml-2",style:{marginTop:"13px"}})]},t))})]}),(0,l.jsx)("div",{className:"col",children:-1!==e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"col alert alert-primary square",children:[(0,l.jsx)("b",{children:v.lessons[e].title.substring(0,30)}),g.includes(v.lessons[e]._id)?(0,l.jsx)("span",{className:"float-right pointer",onClick:I,children:"Mark as incomplete"}):(0,l.jsx)("span",{className:"float-right pointer",onClick:H,children:"Mark as completed"})]}),v.lessons[e].video&&v.lessons[e].video.location&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"wrapper",children:(0,l.jsx)(m.Z,{className:"player",url:v.lessons[e].video.location,width:"100%",height:"100%",controls:!0,onEnded:()=>H()})})}),(0,l.jsx)(f(),{source:v.lessons[e].content,className:"single-post"})]}):(0,l.jsx)("div",{className:"d-flex justify-content-center p-5",children:(0,l.jsxs)("div",{className:"text-center p-5",children:[(0,l.jsx)(E.Z,{className:"text-primary display-1 p-5"}),(0,l.jsx)("p",{className:"lead",children:"Click on the lessons to start learning."})]})})})]})})};var M=C}},function(e){e.O(0,[911,577,452,536,774,888,179],function(){return e(e.s=61302)}),_N_E=e.O()}]);